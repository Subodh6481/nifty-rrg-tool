<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
</head>
<body>
<div id="chart" style="width:100%;height:100%;"></div>

<script>
    const data = {{DATA}};
    const traces = [];

    data.forEach(sector => {
        const x = sector.history.map(p => p[0]);
        const y = sector.history.map(p => p[1]);

        // tail
        traces.push({
            x, y,
            mode: "lines+markers",
            line: { width: 1 },
            marker: { size: 6 },
            opacity: 0.4,
            name: sector.name,
            hoverinfo: "skip"
        });

        // arrow head (latest)
        traces.push({
            x: [x[x.length - 1]],
            y: [y[y.length - 1]],
            mode: "markers",
            marker: {
                size: 12,
                symbol: "triangle-right",
                line: { width: 1 }
            },
            hovertemplate:
                `<b>${sector.name}</b><br>` +
                `RS Ratio: ${x.at(-1).toFixed(2)}<br>` +
                `RS Momentum: ${y.at(-1).toFixed(2)}`
        });
    });

    Plotly.newPlot("chart", traces, {
        xaxis: { title: "JdK RS-Ratio", zeroline: false },
        yaxis: { title: "JdK RS-Momentum", zeroline: false },
        showlegend: false
    });
</script>
</body>
</html>

